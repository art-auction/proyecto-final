(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{126:function(e,t){},153:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(37),o=a.n(r),l=(a(73),a(3)),c=a(1),i=a(2),u=a(6),m=a(5),d=a(7),g=a(27),p=a.n(g),h=function e(){var t=this;Object(c.a)(this,e),this.signup=function(e,a,n){return t.service.post("/signup",{username:e,password:a,role:n}).then(function(e){return e.data})},this.login=function(e,a,n){return t.service.post("/login",{username:e,password:a,role:n}).then(function(e){return e.data})},this.logout=function(){return t.service.post("/logout",{}).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/loggedin",{}).then(function(e){return e.data})};var a=p.a.create({baseURL:"https://auctionart.herokuapp.com/api",withCredentials:!0});this.service=a},b=(a(92),a(10)),f=a(8),E=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password,s=a.state.role;a.service.signup(t,n,s).then(function(e){a.setState({username:"",password:"",role:"",Redirect:!0},function(){a.props.toggleSignup()})}).catch(function(e){a.setState(Object(l.a)({},a.state,{err:"fail signup"})),console.log(e)})},a.handleChange=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(b.a)({},n,s))},a.state={username:"",password:"",role:"User",Redirect:!1},a.service=new h,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t="Signup ";return t+=this.props.show?"show":"hide",s.a.createElement("div",{className:t},s.a.createElement("i",{class:"far fa-times-circle",onClick:this.props.toggleSignup}),s.a.createElement("div",{className:"form-signup"},s.a.createElement("form",{onSubmit:this.handleFormSubmit},s.a.createElement("label",null,"Username:"),s.a.createElement("br",null),s.a.createElement("i",{class:"far fa-user"}),s.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}}),s.a.createElement("br",null),s.a.createElement("label",null,"Password:"),s.a.createElement("br",null),s.a.createElement("i",{class:"fas fa-key"}),s.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),s.a.createElement("br",null),s.a.createElement("label",{for:"rol"},"Tipo de usuario"),s.a.createElement("br",null),s.a.createElement("select",{onChange:function(t){return e.handleChange(t)},name:"role",id:""},s.a.createElement("option",{value:"User"},"User"),s.a.createElement("option",{value:"Artist"},"Artist")),s.a.createElement("br",null),s.a.createElement("input",{type:"submit",value:"Registrarse"}),this.state.err?s.a.createElement("div",{className:"signup-form"},s.a.createElement("p",null,"Error de registro!!!")):null),s.a.createElement(f.b,{to:"/"}," ")))}}]),t}(n.Component),v=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){console.log(e),e.preventDefault();var t=a.state.username,n=a.state.password,s=a.state.role;a.service.login(t,n,s).then(function(e){a.setState({username:"",password:"",role:"",Redirect:!0},function(){a.props.toggleLogin()})}).catch(function(e){a.setState(Object(l.a)({},a.state,{err:"fail login"})),console.log(e)})},a.handleChange=function(e){var t=e.target,n=t.name,s=t.value;console.log(s,"<----"),a.setState(Object(b.a)({},n,s))},a.state={username:"",password:"",role:"User",Redirect:!1},a.service=new h,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t="Login ";return t+=this.props.show?"show":"hide",s.a.createElement("div",{className:t},s.a.createElement("i",{class:"far fa-times-circle",onClick:this.props.toggleLogin}),s.a.createElement("div",{className:"login-form"},s.a.createElement("form",{onSubmit:this.handleFormSubmit},s.a.createElement("label",null,"Username:"),s.a.createElement("br",null),s.a.createElement("i",{class:"far fa-user"}),s.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}}),s.a.createElement("br",null),s.a.createElement("label",null,"Password:"),s.a.createElement("br",null),s.a.createElement("i",{class:"fas fa-key"}),s.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),s.a.createElement("br",null),s.a.createElement("label",{for:"rol"},"Tipo de usuario"),s.a.createElement("br",null),s.a.createElement("select",{onChange:function(t){return e.handleChange(t)},name:"role",id:""},s.a.createElement("option",{value:"User"},"User"),s.a.createElement("option",{value:"Artist"},"Artist")),s.a.createElement("br",null),s.a.createElement("input",{type:"submit",value:"Iniciar sesion"}),s.a.createElement("br",null),this.state.err?s.a.createElement("div",{className:"login-form"},s.a.createElement("p",null,"por favor registrese!!")):null),s.a.createElement(f.b,{to:"/signup"}," ")))}}]),t}(n.Component),O=a(14),j=function(){return s.a.createElement("div",null,s.a.createElement("h5",{className:"titulo-flot"},"Art & auction"),s.a.createElement("video",{autoPlay:"autoplay",loop:"loop",id:"video_background",muted:!0},s.a.createElement("source",{src:"https://res.cloudinary.com/dqphzmuq1/video/upload/v1554364685/paintings/A0450_1507_H3_807_1163_Videvo.mp4",type:"video/mp4"})))},S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={loggedInUser:null},a.service=new h,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(l.a)({},this.state,{loggedInUser:e.userInSession}))}},{key:"render",value:function(){return this.props.loggedInUser?s.a.createElement("main",{className:"container nav"},s.a.createElement("a",{class:"toggle-menu"},"\u2261"),s.a.createElement("div",{class:"menu row"},s.a.createElement(f.b,{className:"title",to:"/"},s.a.createElement("i",{class:"fas fa-home"})),s.a.createElement(f.b,{className:"ref-obra link-1",to:"/obras"},"Obras"),s.a.createElement("small",null,"Hola, ",this.props.loggedInUser),s.a.createElement("br",null),s.a.createElement("div",{id:"cerrar"},s.a.createElement("a",{className:"link-nav",onClick:this.props.logoutUser,variant:"outline-secondary"},"Cerrar Sesion")))):s.a.createElement("main",{className:"nav"},s.a.createElement("a",{class:"toggle-menu"},"\u2261"),s.a.createElement("div",{class:"menu"},s.a.createElement(f.b,{className:"title",to:"/"},s.a.createElement("i",{class:"fas fa-home"})),s.a.createElement(f.b,{className:"ref-obra",to:"/obras"},"Obras"),s.a.createElement("ul",{className:"sesion"},s.a.createElement("li",null,s.a.createElement("a",{onClick:this.props.toggleLogin},"Iniciar Sesi\xf3n")),s.a.createElement("li",null,s.a.createElement("a",{onClick:this.props.toggleSignup},"Registrate")))))}}]),t}(n.Component),w=a(40),y=a(28),N=a.n(y),k=function e(){var t=this;Object(c.a)(this,e),this.getObras=function(){return t.service.get("/obras").then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.getObra=function(e){return t.service.get("artist-profile/".concat(e)).then(function(e){return e.data})},this.getObraSubasta=function(e){return t.service.get("/subasta/".concat(e)).then(function(e){return e.data})},this.postNewObra=function(e){return console.log("entra"),t.service.post("postobra",e).then(function(e){return console.log(e),e.data}).catch(function(e){return console.log(e)})},this.postPujas=function(e,a){return console.log(e),t.service.post("postpuja/".concat(a),e).then(function(e){return console.log(e),e.data}).catch(function(e){return console.log(e)})},this.getPuja=function(e){return t.service.get("getpuja/".concat(e)).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.service=p.a.create({baseURL:"https://auctionart.herokuapp.com/api",withCredentials:!0})},I=a(66),C=a.n(I),U=function(e){return s.a.createElement("div",{className:"row"},s.a.createElement("main",{className:"artists-obras"},s.a.createElement("div",{className:"col-lg-6 profile-img cont-obras inf-artist",id:"artist-text"},s.a.createElement("h5",{className:"card-title"},e.username),s.a.createElement("p",null,"El se\xf1or ",e.username,' es una artista muy respetado en su pa\xeds. Su estilo realista est\xe1 influenciado por la obra de grandes maestros rusos del gupo "Los Itinerantes" y de otrso grandes maestros del barroco'),s.a.createElement(f.b,{className:"btn btn-sm btn-outline-dark",onClick:console.log(e),to:"/artist-profile/".concat(e._id)},"Perfil de artista")),s.a.createElement("div",{class:"col-md-6"},s.a.createElement("div",{className:"row"},e.obras.map(function(e){return s.a.createElement("div",{class:"col-md-6"},s.a.createElement("div",{className:"card card-obras"},s.a.createElement("img",{className:"card-img-top",src:e.image,alt:"imagen -pintura"}),s.a.createElement("div",{className:"card-body"},s.a.createElement(f.b,{to:"/subasta/".concat(e._id)}," ",s.a.createElement(C.a,{variant:"outline-info"},"Subasta")))))})))))},M=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).getObraId=function(t){e.props.getObraId(t)},e.getArtists=function(){return e.serviceObras.getObras().then(function(t){console.log(t),e.setState({artists:t})})},e.state={artists:[],obraIdSelected:void 0},e.serviceObras=new k,e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getArtists()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container container-yalose"},s.a.createElement("h1",null,"Obras"),s.a.createElement("hr",null),s.a.createElement("div",{className:"row card-container"},Array.isArray(this.state.artists)?this.state.artists.map(function(t){return s.a.createElement(U,Object.assign({key:t._id,sendId:e.sendMsg},t,{getObraId:e.getObraId}))}):null))}}]),t}(n.Component),L=a(67),P=a.n(L),x=(a(142),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).getObraId=function(e){a.setState(Object(l.a)({},a.state,{obraIdSelected:e}))},a.sendMsg=function(){a.state.moneyUser-a.state.mensaje>=0?(a.socket.emit("new_message",{sms:a.state.mensaje,user:a.props.User}),a.setState({moneyUser:a.state.moneyUser-a.state.mensaje,noMoney:!1})):a.setState({noMoney:!0}),console.log("meeee")},a.handleFormSubmit=function(e){if(e.preventDefault(),a.state.moneyUser-a.state.mensaje>=0){a.state.apuestas;a.servicePuja.postPujas({sms:a.state.mensaje,user:a.props.User},a.props.match.params.id).then(function(e){}).catch(function(e){return console.log(e)})}},a.startSubasta=function(){a.props.setTimeout(function(){var e=Math.max.apply(Math,Object(w.a)(a.state.puja.map(function(e){return e.money})));a.socket.emit("winner",{user:a.state.puja.find(function(t){return t.money==e}).user})},3e3)},a.handleState=function(e){var t=e.target,n=t.name,s=t.value;console.log(n,s),a.setState(Object(l.a)({},a.state,Object(b.a)({},n,s)),function(){console.log(a.state)})},a.state=Object(b.a)({loggedInUser:a.props.User,obraIdSelected:void 0,obra:{},endpoint:"https://auctionart.herokuapp.com",mensaje:"",apuestas:[],puja:[],winner:"",moneyUser:3e3,noMoney:!1},"winner",!1),a.socket=N()(a.state.endpoint),a.serviceSubasta=new k,a.servicePuja=new k,a.socket.on("new_message",function(e){console.log(e)}),a.socket.on("mensaje",function(e){console.log(e)}),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"getSubastaObra",value:function(){var e=this;return this.serviceSubasta.getObraSubasta(this.props.match.params.id).then(function(t){e.serviceSubasta.getPuja(e.props.match.params.id).then(function(a){e.setState(Object(l.a)({},e.state,{obra:t,puja:a.pujaColection}))})})}},{key:"componentDidMount",value:function(){var e=this;this.state.endpoint;this.getSubastaObra(),this.socket.on("new_message",function(t){console.log(t);var a=Object(w.a)(e.state.puja);console.log(a),a.push({user:t.user,money:t.sms}),console.log(a),e.setState(Object(l.a)({},e.state,{puja:a}))}),this.socket.on("winner",function(t){console.log(t.user),e.setState({winner:t.user})})}},{key:"render",value:function(){var e=this;return this.props.User?s.a.createElement("div",{className:"row col-sm-10"},s.a.createElement("div",{className:"col-md-6 col-sm-8"},this.state.winner?s.a.createElement("h1",null,"El ganador es: ",this.state.winner):null,s.a.createElement("div",{className:"subasta-form"},s.a.createElement("h4",null,this.state.obra.title),s.a.createElement("hr",null),s.a.createElement("img",{className:"subasta-img",src:this.state.obra.image}),s.a.createElement("br",null),s.a.createElement("strong",null,this.state.obra.a\u00f1o),s.a.createElement("br",null))),s.a.createElement("div",{className:"col-md-6 col-sm-8 puja-cont"},s.a.createElement("p",{className:"tucredito"},"Tu cr\xe9dito es: ",this.state.moneyUser," CarlosCoin"),s.a.createElement("span",{id:"form-puja"},s.a.createElement("form",{onSubmit:this.handleFormSubmit},s.a.createElement("div",{className:"put-box"},this.state.puja.map(function(e){return console.log(e),s.a.createElement("span",null,s.a.createElement("div",{class:"box sb4"},s.a.createElement("strong",null,e.user,", puja: ",e.money," ",s.a.createElement("i",{class:"fas fa-gavel"})," "),s.a.createElement("br",null)))})),this.state.noMoney?s.a.createElement("p",null,"NO MONEY POBRE"):null,s.a.createElement("input",{className:"input-puja",placeholder:"Puja aqu\xed",value:this.state.mensaje,name:"mensaje",type:"number",onChange:function(t){return e.handleState(t)}}),s.a.createElement("input",{className:"input-puja",type:"submit",onClick:this.sendMsg})))),s.a.createElement("button",{className:"time",onClick:this.startSubasta},"GO!!!!!")):s.a.createElement("div",null,s.a.createElement(O.a,{to:"/"}),s.a.createElement("h1",{id:"title-subasta"},"NECESITAS INICIAR SESION"))}}]),t}(n.Component)),A=P()(x),_=function(){function e(t){Object(c.a)(this,e),this.render=function(e){e.map(function(e,t){return'\n         <div className="msg" id="box-msg">\n\n         '})},this.socket=N()("https://auctionart.herokuapp.com"),this.socket.on("mensaje",function(e){console.log(e)})}return Object(i.a)(e,[{key:"sendMessage",value:function(e,t){console.log(e);console.log("Enviando mensaje: ".concat(e," del usuario ").concat(t)),this.socket.emit("new_message",{})}}]),e}(),R=a(15),D=a(39),F=a.n(D),q={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",width:"50%",height:"50%"}};F.a.setAppElement("#root");var T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).openModal=function(){a.setState({modalIsOpen:!0})},a.closeModal=function(){a.setState({modalIsOpen:!1})},a.handleSate=function(e){var t=e.target,n=t.name,s=t.value;a.setState({obra:Object(l.a)({},a.state.obra,Object(b.a)({},n,s))})},a.handleFileUpload=function(e){var t=new FormData;t.append("obra",e.target.files[0]),a.service.postNewObra(t).then(function(e){a.setState({obra:Object(l.a)({},a.state.obra,{obra:e.secure_url})})}).catch(function(e){return console.log(e)})},a.handleSubmit=function(e){e.preventDefault(),a.service.postNewObra(a.state.obra),a.setState({obra:{title:"",price:"","a\xf1o":"",image:"",description:"",author:""}}),a.closeModal()},a.state={modalIsOpen:!1,obra:{title:"",price:"","a\xf1o":"",image:"",description:"",author:""}},a.service=new k,a.openModal=a.openModal.bind(Object(R.a)(Object(R.a)(a))),a.closeModal=a.closeModal.bind(Object(R.a)(Object(R.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("button",{onClick:this.openModal,className:"btn btn-add"},"Nueva obra"),s.a.createElement(F.a,{isOpen:this.state.modalIsOpen,onRequestClose:this.closeModal,style:q},s.a.createElement("h2",null,"Nueva obra"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"Imagen"),s.a.createElement("input",{type:"file",className:"form-control",onChange:function(t){return e.handleFileUpload(t)}})),s.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Crear"))))}}]),t}(n.Component),B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={profile:{}},a.serviceProfile=new k,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"getProfile",value:function(){var e=this;return this.serviceProfile.getObra(this.props.match.params.id).then(function(t){return e.setState({profile:t})})}},{key:"componentDidMount",value:function(){this.getProfile()}},{key:"render",value:function(){return s.a.createElement("div",{className:"container profile-container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-4 inf-artist"},s.a.createElement("h1",null,this.state.profile.username),s.a.createElement("p",null,"El se\xf1or ",this.state.profile.username,' es una artista muy respetado en su pa\xeds. Su estilo realista est\xe1 influenciado por la obra de grandes maestros rusos del gupo "Los Itinerantes" y de otrso grandes maestros del barroco'),s.a.createElement(T,{addingImage:this.getProfile})),s.a.createElement("article",{className:"col-md-8 profile-art"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},this.state.profile.obras?this.state.profile.obras.map(function(e){return s.a.createElement("div",{className:"col-md-6"},s.a.createElement("img",{src:e.image}))}):null)))))}}]),t}(n.Component),W=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).getObraId=function(e){a.setState(Object(l.a)({},a.state,{obraIdSelected:e}))},a.getTheUser=function(e){a.setState({loggedInUser:e})},a.toggleLogin=function(){a.state.showSignup&&a.setState({showSignup:!a.state.showSignup}),a.setState({showLogin:!a.state.showLogin}),a.ceckLoggedin()},a.toggleSignup=function(){console.log("entra"),a.state.showLogin&&a.setState({showLogin:!a.state.showLogin}),a.setState({showSignup:!a.state.showSignup}),a.ceckLoggedin()},a.ceckLoggedin=function(){a.service.loggedin().then(function(e){e&&a.setState(Object(l.a)({},a.state,{loggedInUser:e.username}),function(){})}).catch(function(){a.setState(Object(l.a)({},a.state,{loggedInUser:null}))})},a.logoutUser=function(){a.service.logout().then(function(){a.setState({loggedInUser:null})})},a.sendMsg=function(){a.socket.sendMessage(a.state.obraIdSelected)},a.state={loggedInUser:!1,showLogin:!1,showSignup:!1,obraIdSelected:void 0},a.service=new h,a.socket=new _,a.ceckLoggedin(),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(S,{toggleLogin:this.toggleLogin,toggleSignup:this.toggleSignup,logoutUser:this.logoutUser,loggedInUser:this.state.loggedInUser}),s.a.createElement(v,{show:this.state.showLogin,toggleLogin:this.toggleLogin}),s.a.createElement("div",{className:"holaDan"}),s.a.createElement(E,{show:this.state.showSignup,toggleSignup:this.toggleSignup}),s.a.createElement("div",{className:"holaDan"}),s.a.createElement(O.d,null,s.a.createElement(O.b,{exact:!0,path:"/artist-profile/:id",component:B}),s.a.createElement(O.b,{exact:!0,path:"/obras",render:function(){return s.a.createElement(M,{sendId:e.sendMsg,getObraId:e.getObraId})}}),s.a.createElement(O.b,{exact:!0,path:"/signup",component:E}),s.a.createElement(O.b,{exact:!0,path:"/login",component:v}),s.a.createElement(O.b,{exact:!0,path:"/",component:j}),s.a.createElement(O.b,{exact:!0,path:"/subasta/:id",render:function(t){return s.a.createElement(A,Object.assign({},t,{User:e.state.loggedInUser,getObraId:e.getObraId}))}})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(f.a,null,s.a.createElement(W,null)),document.getElementById("root")),document.querySelector(".toggle-menu").onclick=function(e){e.preventDefault(),document.querySelector(".menu").classList.toggle("abierto")},"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},68:function(e,t,a){e.exports=a(153)},73:function(e,t,a){},92:function(e,t,a){}},[[68,1,2]]]);
//# sourceMappingURL=main.a7271998.chunk.js.map